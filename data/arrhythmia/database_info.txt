https://physionet.org/content/ecg-ppg-simulator-arrhythmia/1.3.1/

Abstract
The simulation of electrocardiographic (ECG) and photoplethysmographic (PPG) signals with cardiac arrhythmias is important when developing and testing arrhythmia detectors. This software is capable of simulating sinus rhythm, episodes of atrial fibrillation and atrial premature beats in ECGs and PPGs as well as extreme bradycardia and ventricular tachycardia in PPGs. Different types of noise and artifacts can be added to simulated signals to improve realism and mimic the signals acquired in free-living conditions. Two versions are provided: a binary version for Windows 10 and Matlab source code.

Background
Cardiac arrhythmias are a major health problem often associated with serious outcome or sudden death [1,2]; hence, reliable detection of initial arrhythmia episodes is crucial to provide timely treatment. Conventional arrhythmia monitoring relies on long-term ECG acquisition in free-living conditions. However, high expectations are placed on wearables with integrated optical sensors capable of acquiring PPG, which should enable unobtrusive arrhythmia monitoring [3]. Irrespective of the underlying modality, i.e. ECG or PPG, the development, testing and validation of arrhythmia detectors should rely on annotated databases. The development of robust arrhythmia detectors, intended for use in free-living conditions, is particularly challenging since annotation of long-term signals, often contaminated with noise and artifacts, is time-consuming and costly. Moreover, PPG annotations must rely on a simultaneously acquired ECG due to the absence of guidelines for PPG-based arrhythmia interpretation.

The provided software facilitates the development and testing of arrhythmia detectors by enabling simulation of databases of ECG and PPG signals annotated by design. The simulator operates in three distinct modes: 1) simulation of ECGs with episodes of atrial fibrillation; 2) simulation of PPGs with episodes of atrial fibrillation; 3) simulation of PPGs with episodes of extreme bradycardia or ventricular tachycardia. Simulation of ECGs with atrial fibrillation is valuable when developing ECG-based algorithms for the detection of brief (less than 30 seconds) arrhythmia episodes since they are scarce in currently available annotated ECG databases. Simulation of PPGs with episodes of atrial fibrillation, extreme bradycardia or ventricular tachycardia fills the void of absent PPG databases with annotated arrhythmias. Another important aspect of simulators is the ability to control properties of generated signals, e.g., the number of arrhythmic beats, the amount and amplitude of noise and artifacts. Such flexibility allows a comprehensive investigation of arrhythmia detectors under different circumstances.

Software Description
Two versions of the software are provided. The zipped_binary folder contains the full ECG and PPG simulator, including a graphical user interface (GUI). The ECG_PPG_model folder contains source Matlab files for the simulator (note that two compiled Matlab pcode files are included, which are required for the generation of clean PPG).

Using the graphical interface
The simulator is launched by the SIM_ARR.exe application file. The software comes with a GUI which can handle various simulator parameters described in the following sections (see also Figure 1 in files below).

Section “Rhythm selection”
One of three types of arrhythmias can be selected: atrial fibrillation, extreme bradycardia, or ventricular tachycardia.

Section “Signal selection”
Only RR series can be generated by selecting “RR intervals only”. Otherwise, RR intervals and corresponding ECG and PPG signals are generated by selecting “All signals”.

Field “Number of datasets” determines the number of unique signal sets generated, e.g., if the number is set to 2, the program will generate 2 unique sets of RR intervals, ECG and PPG signals.

Section “Rhythm parameters”
The following parameters can be set:

The length of generated signals is determined by selecting the number of RR intervals (“Number of RR intervals”).
“Median length of arrhythmia episode” determines median duration of arrhythmia episodes in RR intervals.
The total time when arrhythmia is present is determined by providing “Arrhythmia burden” from 0 (no arrhythmia) to 1 (arrhythmia only).
The amount of atrial premature beats is selected by providing “Rate of atrial premature beats” from 0 (no premature beats) to 0.5 (half of all beats are premature).
Section “ECG noise”
One of three types of noise frequently encountered in free-living ECG recordings, i.e., muscle noise, electrode movement artifacts and baseline wander, as well as a mixture of them or no noise at all can be selected. Under the field “Noise RMS” the amplitude of noise is selected.

Section “PPG artifacts”
One of four types of artifacts frequently encountered in free-living PPG recordings, i.e., device displacement, forearm motion, hand motion and poor contact, as well as a mixture of them or no artifacts at all can be selected. Under the field “Mean interval duration” the mean duration of artifacts and artifact-free intervals can be selected.

Section “ECG leads”
Any combination of ECG leads is allowed. Bipolar limb (I, II, III), augmented unipolar limb (aVR, aVL, aVF), unipolar chest (V1, V2, V3, V4, V5) and orthogonal (X, Y, Z) ECG leads can be generated. Sampling frequency of 250, 500 or 1000 Hz can be selected for ECG generation.

Section “PPG pulses”
Any combination of PPG pulse types defined by Dawber et al. [4] can be selected for PPG simulation. Sampling frequency of 75, 100, 250, 500 or 1000 Hz is available.

Signal generation is initialized by pressing the button “Generate signals”. The progress of signal generation is displayed in the “Progress” bar at the bottom of the window.

Location of generated signals can be changed by pressing the button “Set path”. Current location is displayed under the button.

Relevant information including original publications, acknowledgements and copyrights can be reached by pressing the button “About”.

Using the source files
The execution of the source files is demonstrated by running MAIN_PROGRAM.m file. The code allows for modification of parameters concerning rhythm, ECG noise, PPG artifacts and selection of PPG pulse type (see corresponding sections in “Using the graphical interface”). It is possible to select either real, or synthetic RR interval series as well as ventricular and atrial activity tracings when generating ECGs. When generating PPGs, any available RR interval series (generated by ECG simulator or extracted from real ECG tracings) can be used as an input. Note that PPG simulator is tested for generating sinus rhythm, atrial fibrillation, premature beats, bradycardia and tachycardia episodes.

Important notes:
Noise and artifacts for ECGs and PPGs are generated separately, and thus unrelated.
Episodes of extreme bradycardia and ventricular tachycardia are only available for simulation of PPG signals.
RR series with sinus rhythm are taken from the MIT–BIH Normal Sinus Rhythm Database [5], with atrial fibrillation – from the Long-Term AF Database [5, 6], with extreme bradycardia and ventricular tachycardia – from the PhysioNet CinC Challenge 2015 Database training set [5]. Currently, the software does not support usage of custom RR series.
For ECG simulation, QRST complexes and P-waves are taken from the PTB Diagnostic ECG Database [5, 7], f-waves – from patients clinically diagnosed with atrial fibrillation [8], noise – from the MIT–BIH Noise Stress Test Database [5, 9].
